<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <link rel="icon" href="/note/images/main.jpeg"><title>第十三章、事件 | 前端学习笔记</title><meta name="description" content="记录各种前端知识的学习笔记"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.22">
    <link rel="preload" href="/note/assets/js/runtime~app.afee06d1.js" as="script"><link rel="preload" href="/note/assets/css/styles.52538e5b.css" as="style"><link rel="preload" href="/note/assets/js/4640.740cb415.js" as="script"><link rel="preload" href="/note/assets/js/app.266da3ea.js" as="script">
    <link rel="stylesheet" href="/note/assets/css/styles.52538e5b.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/note/" class=""><img class="logo" src="/note/images/main.jpeg" alt="前端学习笔记"><span class="site-name can-hide">前端学习笔记</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="前端书籍笔记"><span class="title">前端书籍笔记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="前端书籍笔记"><span class="title">前端书籍笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/note/js-develop/1.html" class="nav-link" aria-label="《JavaScript高级程序设计》"><!--[--><!--]--> 《JavaScript高级程序设计》 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/note/js-algorithms/1.html" class="nav-link" aria-label="《JavaScript数据结构与算法》"><!--[--><!--]--> 《JavaScript数据结构与算法》 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/note/css-secret/1.html" class="nav-link" aria-label="《css揭秘》"><!--[--><!--]--> 《css揭秘》 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/note/js-njia/1.html" class="nav-link" aria-label="《JavaScript忍者秘籍》"><!--[--><!--]--> 《JavaScript忍者秘籍》 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="各类知识点"><span class="title">各类知识点</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="各类知识点"><span class="title">各类知识点</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/note/flex" class="nav-link" aria-label="Flex布局"><!--[--><!--]--> Flex布局 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/note/grid" class="nav-link" aria-label="Grid布局"><!--[--><!--]--> Grid布局 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/note/git" class="nav-link" aria-label="git相关操作"><!--[--><!--]--> git相关操作 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/note/sort/1.html" class="nav-link" aria-label="排序算法"><!--[--><!--]--> 排序算法 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Typescript"><span class="title">Typescript</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Typescript"><span class="title">Typescript</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/note/ts-challenges" class="nav-link" aria-label="Typescript类型挑战"><!--[--><!--]--> Typescript类型挑战 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a href="/note/write/1.html" class="nav-link" aria-label="手写系列"><!--[--><!--]--> 手写系列 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/yqwoshuai/note" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="前端书籍笔记"><span class="title">前端书籍笔记</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="前端书籍笔记"><span class="title">前端书籍笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/note/js-develop/1.html" class="nav-link" aria-label="《JavaScript高级程序设计》"><!--[--><!--]--> 《JavaScript高级程序设计》 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/note/js-algorithms/1.html" class="nav-link" aria-label="《JavaScript数据结构与算法》"><!--[--><!--]--> 《JavaScript数据结构与算法》 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/note/css-secret/1.html" class="nav-link" aria-label="《css揭秘》"><!--[--><!--]--> 《css揭秘》 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/note/js-njia/1.html" class="nav-link" aria-label="《JavaScript忍者秘籍》"><!--[--><!--]--> 《JavaScript忍者秘籍》 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="各类知识点"><span class="title">各类知识点</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="各类知识点"><span class="title">各类知识点</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/note/flex" class="nav-link" aria-label="Flex布局"><!--[--><!--]--> Flex布局 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/note/grid" class="nav-link" aria-label="Grid布局"><!--[--><!--]--> Grid布局 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/note/git" class="nav-link" aria-label="git相关操作"><!--[--><!--]--> git相关操作 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/note/sort/1.html" class="nav-link" aria-label="排序算法"><!--[--><!--]--> 排序算法 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Typescript"><span class="title">Typescript</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Typescript"><span class="title">Typescript</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/note/ts-challenges" class="nav-link" aria-label="Typescript类型挑战"><!--[--><!--]--> Typescript类型挑战 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a href="/note/write/1.html" class="nav-link" aria-label="手写系列"><!--[--><!--]--> 手写系列 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/yqwoshuai/note" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item active"></p><ul class=""><li><!--[--><a href="/note/js-develop/1.html" class="nav-link sidebar-item" aria-label="第一章、JavaScript 简介"><!--[--><!--]--> 第一章、JavaScript 简介 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/note/js-develop/2.html" class="nav-link sidebar-item" aria-label="第二章、在HTML中使用JavaScript"><!--[--><!--]--> 第二章、在HTML中使用JavaScript <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/note/js-develop/3.html" class="nav-link sidebar-item" aria-label="第三章、基本概念"><!--[--><!--]--> 第三章、基本概念 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/note/js-develop/4.html" class="nav-link sidebar-item" aria-label="第四章、变量，作用于和内存问题"><!--[--><!--]--> 第四章、变量，作用于和内存问题 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/note/js-develop/5.html" class="nav-link sidebar-item" aria-label="第五章、引用类型"><!--[--><!--]--> 第五章、引用类型 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/note/js-develop/6.html" class="nav-link sidebar-item" aria-label="第六章、面向对象的程序设计"><!--[--><!--]--> 第六章、面向对象的程序设计 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/note/js-develop/8.html" class="nav-link sidebar-item" aria-label="第八章、BOM"><!--[--><!--]--> 第八章、BOM <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/note/js-develop/10.html" class="nav-link sidebar-item" aria-label="第十章、DOM"><!--[--><!--]--> 第十章、DOM <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/note/js-develop/11.html" class="nav-link sidebar-item" aria-label="第十一章、DOM扩展"><!--[--><!--]--> 第十一章、DOM扩展 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/note/js-develop/12.html" class="nav-link sidebar-item" aria-label="第十二章、DOM2和DOM3"><!--[--><!--]--> 第十二章、DOM2和DOM3 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/note/js-develop/13.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="第十三章、事件"><!--[--><!--]--> 第十三章、事件 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#事件流" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="事件流"><!--[--><!--]--> 事件流 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#事件处理程序" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="事件处理程序"><!--[--><!--]--> 事件处理程序 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#dom2级事件处理程序" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="DOM2级事件处理程序"><!--[--><!--]--> DOM2级事件处理程序 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#ie事件处理程序" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="IE事件处理程序"><!--[--><!--]--> IE事件处理程序 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#事件对象" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="事件对象"><!--[--><!--]--> 事件对象 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#dom中的事件对象" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="DOM中的事件对象"><!--[--><!--]--> DOM中的事件对象 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#ie中的事件对象" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="IE中的事件对象"><!--[--><!--]--> IE中的事件对象 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#跨浏览器的事件模型" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="跨浏览器的事件模型"><!--[--><!--]--> 跨浏览器的事件模型 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#事件类型" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="事件类型"><!--[--><!--]--> 事件类型 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#ui事件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="UI事件"><!--[--><!--]--> UI事件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#焦点事件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="焦点事件"><!--[--><!--]--> 焦点事件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#鼠标与滚轮事件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="鼠标与滚轮事件"><!--[--><!--]--> 鼠标与滚轮事件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#键盘与文本事件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="键盘与文本事件"><!--[--><!--]--> 键盘与文本事件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#变动事件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="变动事件"><!--[--><!--]--> 变动事件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#html5事件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="HTML5事件"><!--[--><!--]--> HTML5事件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#设备事件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="设备事件"><!--[--><!--]--> 设备事件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/note/js-develop/13.html#触摸与手势事件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="触摸与手势事件"><!--[--><!--]--> 触摸与手势事件 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a href="/note/js-develop/14.html" class="nav-link sidebar-item" aria-label="第十四章、表单脚本"><!--[--><!--]--> 第十四章、表单脚本 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/note/js-develop/20.html" class="nav-link sidebar-item" aria-label="第二十章、JSON"><!--[--><!--]--> 第二十章、JSON <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="第十三章、事件" tabindex="-1"><a class="header-anchor" href="#第十三章、事件" aria-hidden="true">#</a> 第十三章、事件</h1><h2 id="事件流" tabindex="-1"><a class="header-anchor" href="#事件流" aria-hidden="true">#</a> 事件流</h2><p>“DOM2级事件”规定事件流包括3个阶段：事件捕获阶段，处于目标阶段，事件冒泡阶段。 事件捕获表示从最外层节点开始捕获事件，然后逐级像内传播直到具体节点。 事件冒泡表示事件由最具体元素开始接受元素，然后逐级向上传播到文档节点。</p><h2 id="事件处理程序" tabindex="-1"><a class="header-anchor" href="#事件处理程序" aria-hidden="true">#</a> 事件处理程序</h2><h3 id="dom2级事件处理程序" tabindex="-1"><a class="header-anchor" href="#dom2级事件处理程序" aria-hidden="true">#</a> DOM2级事件处理程序</h3><p>“DOM2级事件”为所有DOM节点定义了addEventListener()和removeEventListener()两个方法，分别用于指定事件处理程序和移除事件处理程序。都接收3个参数：事件名称、事件处理程序、一个布尔值，布尔值为true，则在捕获阶段调用事件处理程序，布尔值为false，则在冒泡阶段调用事件处理程序。<br> 使用DOM2级事件处理程序可以为同一个事件添加多个程序，会按照添加的顺序触发。addEventListener()添加的事件处理程序只能用removeEventListener()来移除，移除时传入的参数与添加时的相同，无法删除匿名函数，因为两个一样的匿名函数并不是同一个函数。</p><h3 id="ie事件处理程序" tabindex="-1"><a class="header-anchor" href="#ie事件处理程序" aria-hidden="true">#</a> IE事件处理程序</h3><p>IE使用attachEvent()和detachEvent()，都接收两个参数，事件名称和事件处理程序，只在冒泡阶段触发。事件名称需要添加“on”前缀，同一事件多个程序会按添加的相反顺序触发。</p><h2 id="事件对象" tabindex="-1"><a class="header-anchor" href="#事件对象" aria-hidden="true">#</a> 事件对象</h2><p>在DOM上触发事件时，会产生一个event事件对象。这个对象中包含着所有与事件有关的信息。</p><h3 id="dom中的事件对象" tabindex="-1"><a class="header-anchor" href="#dom中的事件对象" aria-hidden="true">#</a> DOM中的事件对象</h3><p>兼容DOM的浏览器会将一个event对象传入事件处理程序中，event对象所有属性：<br> bubble，布尔值，只读，表示事件是否冒泡；<br> cancelable，布尔值，只读，表示是否可以取消事件默认行为；<br> currentTarget，节点，只读，当前正在处理事件的元素，在事件处理程序内部总是等于this值；<br> defaultPrevented，布尔值，只读，为true表示已经调用了preventDefault()方法；<br> detail，数值信息，只读，事件相关细节信息；<br> eventPhase，数值信息，只读，表示调用事件处理程序的阶段，1表示捕获，2表示“处于目标”，3表示冒泡；<br> preventDefault()，方法，取消事件的默认行为，cancelable为true时才可以使用；<br> stopImmediatePropagation()，方法，取消事件进一步冒泡，同时阻止任何事件处理程序被调用；<br> stopPropagation()，方法，取消事件的进一步冒泡，bubble为true时才可以使用；<br> target，节点，事件的实际目标；<br> trusted，布尔值，只读，为true表示事件是由浏览器生成的，为false表示事件由JavaScript添加；<br> type，字符串，触发的事件类型；<br> view，事件发生的window对象。</p><h3 id="ie中的事件对象" tabindex="-1"><a class="header-anchor" href="#ie中的事件对象" aria-hidden="true">#</a> IE中的事件对象</h3><p>使用DOM0级添加事件处理程序时，event对象是window的一个属性，使用attachEvent()时，event可以通过window对象访问，也会作为参数传入事件处理程序。IE事件对象属性：<br> cancelBubble，布尔值，默认为false，设置为true就可以取消事件冒泡；<br> returnValue，布尔值，默认为true，设置为false可以取消事件默认行为；<br> srcElement，节点，事件的实际目标；<br> type，字符串，事件的名称。</p><h3 id="跨浏览器的事件模型" tabindex="-1"><a class="header-anchor" href="#跨浏览器的事件模型" aria-hidden="true">#</a> 跨浏览器的事件模型</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> EventUtil <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// 添加事件</span>
    <span class="token function-variable function">addHandler</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> type<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	    <span class="token keyword">if</span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span><span class="token punctuation">{</span>
	        ele<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>handler<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>
	        ele<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">&quot;on&quot;</span><span class="token operator">+</span>type<span class="token punctuation">,</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
	        ele<span class="token punctuation">[</span><span class="token string">&quot;on&quot;</span><span class="token operator">+</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> handler<span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 移除事件</span>
    <span class="token function-variable function">removeHandler</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> type<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span>removeEventListener<span class="token punctuation">)</span><span class="token punctuation">{</span>
            ele<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>handler<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span>detachEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>
            ele<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token string">&quot;on&quot;</span><span class="token operator">+</span>type<span class="token punctuation">,</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            ele<span class="token punctuation">[</span><span class="token string">&quot;on&quot;</span><span class="token operator">+</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 获取事件对象</span>
	<span class="token function-variable function">getEvent</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> event <span class="token operator">?</span> event <span class="token operator">:</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 获取事件实际目标</span>
    <span class="token function-variable function">getTarget</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> event<span class="token punctuation">.</span>target <span class="token operator">||</span> event<span class="token punctuation">.</span>srcElement<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 阻止默认事件</span>
	<span class="token function-variable function">preventDefault</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>preventDefault<span class="token punctuation">)</span><span class="token punctuation">{</span>
		    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		    event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 阻止事件冒泡</span>
	<span class="token function-variable function">stopPropagation</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>stopPropagation<span class="token punctuation">)</span><span class="token punctuation">{</span>
            event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            event<span class="token punctuation">.</span>cancelBubble <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 获取mouseover和mouseout事件触发时的相关元素</span>
	<span class="token function-variable function">getRelatedTarget</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>relatedTarget<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> event<span class="token punctuation">.</span>relatedTarget<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>toElement<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> event<span class="token punctuation">.</span>toElement<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>fromElement<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> event<span class="token punctuation">.</span>fromElement<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 获取mousedown和mouseup事件触发时的按键信息</span>
	<span class="token function-variable function">getButton</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">hasFeature</span><span class="token punctuation">(</span><span class="token string">&quot;MouseEvents&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;2.0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		    <span class="token keyword">return</span> event<span class="token punctuation">.</span>button<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		    <span class="token keyword">switch</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>button<span class="token punctuation">)</span><span class="token punctuation">{</span>
			    <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
			    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
                <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
                <span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>
                <span class="token keyword">case</span> <span class="token number">7</span><span class="token operator">:</span>
                    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
			    <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
			    <span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span>
			        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
			    <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>
			        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
		    <span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 获取mousewheel事件（firefox下为DOMMouseScroll事件）鼠标滚轮增量值</span>
	<span class="token function-variable function">getWheelDelta</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>wheelDelta<span class="token punctuation">)</span><span class="token punctuation">{</span>
		    <span class="token keyword">return</span> event<span class="token punctuation">.</span>wheelDelta<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
		    <span class="token keyword">return</span> <span class="token operator">-</span>event<span class="token punctuation">.</span>detail <span class="token operator">*</span> <span class="token number">40</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 获取键盘事件中按键的字符编码</span>
	<span class="token function-variable function">getCharCode</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> event<span class="token punctuation">.</span>charCode <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		    <span class="token keyword">return</span> event<span class="token punctuation">.</span>charCode<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		    <span class="token keyword">return</span> event<span class="token punctuation">.</span>keyCode<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 获取剪贴板中的数据</span>
	<span class="token function-variable function">getClipboardText</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> clip <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>clipboardData <span class="token operator">||</span> window<span class="token punctuation">.</span>clipboardData<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> clip<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 设置剪贴板中的数据</span>
	<span class="token function-variable function">setClipboardText</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>clipboardData<span class="token punctuation">)</span><span class="token punctuation">{</span>
		    <span class="token keyword">return</span> event<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>clipboardData<span class="token punctuation">)</span><span class="token punctuation">{</span>
		    <span class="token keyword">return</span> window<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br></div></div><h2 id="事件类型" tabindex="-1"><a class="header-anchor" href="#事件类型" aria-hidden="true">#</a> 事件类型</h2><h3 id="ui事件" tabindex="-1"><a class="header-anchor" href="#ui事件" aria-hidden="true">#</a> UI事件</h3><p>load事件，当页面完全加载后（包括所有图像，JavaScript文件，CSS文件等外部资源），就会在window上面触发该事件。<br> 图像上面也可以触发load事件，当图像加载完毕时就会触发绑定在img图像上的load事件，在新建图像元素时（无论是DOM创建img标签还是创建新的Image对象），只要设置了src属性，图像就会开始下载。为保证能触发事件，要先绑定事件，再为图像设置src属性。<br> &lt;script&gt;元素也会触发load事件，与图像不同，只有在设置了&lt;script&gt;元素的src属性，并且将该元素添加到文档后，才会开始下载JavaScript文件，所以绑定事件处理程序和设置src属性的先后顺序没有需求。<br> unload事件，文档被完全卸载后触发，从一个页面切换到另一个页面时，就会触发unload事件。<br> resize事件，当浏览器窗口被调整到一个新的高度或宽度时（包括最大化和最小化），就会触发resize事件。浏览器窗口变化的过程中，resize事件会被不断的触发。<br> scroll事件，当用户滚动带滚动条的元素中的内容时，在该元素上面触发。scroll事件也会在文档被滚动期间不断触发。</p><h3 id="焦点事件" tabindex="-1"><a class="header-anchor" href="#焦点事件" aria-hidden="true">#</a> 焦点事件</h3><p>focus事件，元素获得焦点时触发，不冒泡。<br> focusin事件，与focus等价，但会冒泡。在focus之后触发。<br> blur事件，元素失去焦点时触发，不冒泡。<br> focusout事件，与blur等价，但会冒泡。在blur之后触发。</p><h3 id="鼠标与滚轮事件" tabindex="-1"><a class="header-anchor" href="#鼠标与滚轮事件" aria-hidden="true">#</a> 鼠标与滚轮事件</h3><p>click事件，单机鼠标左键或按下回车时触发，表示既可以通过鼠标也可以通过键盘触发。<br> dblclick事件，双击鼠标左键时触发。<br> mousedown事件，按下鼠标任意按键时触发，不能通过键盘触发。<br> mouseup事件，释放鼠标任意按键时触发，不能通过键盘触发。<br> mouseleave事件，在位于元素上方的鼠标光标移动到元素范围之外时触发。不冒泡，子元素包含的范围也是元素的范围。<br> mouseenter事件，在鼠标光标从元素外部首次移动到元素范围之内时触发。不冒泡，子元素包含的范围也是元素的范围。<br> mouseout事件，鼠标指针从一个元素上方，移入另一个元素时触发，另一个元素可以是这个元素内部的子元素。<br> mouseover事件，鼠标指针位于一个元素外部，然后用户将其首次移入这个元素边界之内时触发。<br> 如果mousedown和mouseup中一个被取消，则不会触发click事件，同样只有触发两次click事件，才会触发dblclick事件。</p><p>clientX和clientY属性，这两个属性保存了鼠标事件发生时，鼠标指针在视口中的水平和垂直坐标。<br> pageX和pageY属性，这两个属性保存了鼠标事件发生时，鼠标指针在整个页面中的水平和垂直坐标。页面没有滚动时，与clientX和clientY属性的值相等。 screenX和screenY属性，这两个属性保存了鼠标事件发生时，鼠标指针相对于整个显示器屏幕的水平和垂直坐标。</p><p>shiftkey、ctrlKey、altKey、metaKey4个修改键属性为布尔值，分表表示事件发生时，Shift、Ctrl、ALT、Meta(Window键或Cmd键)4个按键是否被按下。</p><p>mouseover和mouseout事件发生时，DOM为事件对象提供了relatedTarget属性来表示相关元素，mouseover的相关元素是失去光标的那个元素，mouseout的相关元素是获得光标的元素，其他事件的这个值为null。在IE中，mouseover的相关元素保存在fromElement属性中，mouseout的相关元素保存在toElement属性中。</p><p>mousedown和mouseup事件发生时，DOM为事件对象提供了button属性来表示鼠标的按键，0表示鼠标主按键，1表示鼠标中键(鼠标滚轮按键)，2表示鼠标次按键。</p><p>事件对象中还有一个detail属性，表示在指定位置单击了多少次，相继发生一次mousedown和一次mouseup算做一次单击，鼠标移动了位置后detail会被重置为0。</p><p>滚轮事件mousewheel，当用户通过鼠标滚轮与页面交互时，会触发mousewheel事件，事件触发时事件对象上有一个wheelDelta属性，向上滚动时，这个值是120的倍数，向下滚动时，这个值是-120的倍数。 在Firefox中滚轮事件为DOMMouseScroll，其表示滚轮信息的属性为detail，向上滚动时，这个值为-3，向下滚动时，这个值为3。</p><p>触摸设备上不支持dblclick事件，双击浏览器窗口会放大画面，没有办法改变其行为。 两只手指放在屏幕上且页面随手指移动时会触发mousewheel事件和scroll事件。</p><h3 id="键盘与文本事件" tabindex="-1"><a class="header-anchor" href="#键盘与文本事件" aria-hidden="true">#</a> 键盘与文本事件</h3><p>keydown事件，按下任意按键时触发，按住不放则重复触发。<br> keypress事件，按下任意字符按键时触发，按住不放则重复触发<br> keyup事件，释放键盘上的按键时触发。<br> textInput事件，在文本插入文本框之前触发。<br> 这4个事件的发生顺序为keydown，keypress，textInput，keyup，这4个事件也同样支持修改键属性。</p><p>发生keydown和keyup事件时，事件对象keycode中会包含一个键码表示是哪个按键，与ASCII码中的小写字母或数字的编码相同。与大小写无关。唯一不同点为分号，IE/Safari/Chrome返回186，Firefox/Opera返回59。</p><p>keypress事件发生时，事件对象有一个charCode属性，表示所按下按键的ASCII编码，使用String.fromCharCode()方法可以将其转为实际的字符。</p><p>keypress事件和textInput事件的区别：一是所有可以获得焦点的元素都会触发keypress事件，但只有可编辑区域会触发textInput事件，二是只有按下能够实际输入字符的按键才会触发textInput事件，但按下影响文本显示的按键也会触发keypress事件（例如退格按键）。</p><h3 id="变动事件" tabindex="-1"><a class="header-anchor" href="#变动事件" aria-hidden="true">#</a> 变动事件</h3><p>DOMSubtreeModified事件，当DOM结构中发生任何变化时触发，这个事件在其他任何变动事件触发后都会触发。<br> DOMNodeInserted事件，在一个节点作为子节点被插入到另一个节点中时触发。<br> DOMNodeRemoved事件，在节点从其父节点中被移除时触发。<br> DOMNodeInsertedIntoDocument事件，在一个节点被直接插入文档，或通过子树间接插入文档之后触发，在DOMNodeInserted之后触发。<br> DOMNodeRemoveFromDocument事件，在一个节点被直接从文档中移除，或通过子树间接从文档中移除之后触发，在DOMNodeRemoved之后触发。<br> DOMAttrModified事件，在特性被修改之后触发。<br> DOMCharacterDataModified事件，在文本节点的值发生变化时触发。</p><p>在移除节点时，首先会触发DOMNodeRemoved事件，事件目标为被删除的节点，而事件对象的relatedNode属性中包含着目标父节点的引用，与parentNode相同。被删除的节点和其子节点上，会相继触发DOMRemovedFromDocument事件，这个事件不冒泡。紧随其后的是DOMSubtreeModified事件，这个事件的事件目标是被移除节点的父节点。</p><p>在插入节点时，首先会触发DOMNodeInserted事件，事件目标为被插入的节点，而事件对象的relatedNode属性中包含着目标父节点的引用，紧接着会触发DOMNodeInsertedIntoDocument事件，事件目标是被插入的节点，这个事件不冒泡。最后触发DOMSubtreeModified事件，事件目标是被插入节点的父节点。</p><h3 id="html5事件" tabindex="-1"><a class="header-anchor" href="#html5事件" aria-hidden="true">#</a> HTML5事件</h3><p>contextmenu事件，鼠标事件的一种，单机鼠标右键触发事件，可以调出浏览器的上下文菜单，会冒泡，可以使用event.preventDefalut()取消默认的浏览器上下文菜单，从而实现自定义菜单的功能。</p><p>beforeunload事件，这个事件会在浏览器卸载页面之前触发，可以通过它来取消卸载并继续使用原有页面。通过设置event.returnValue的值（IE、Firefox）或将需要显示的信息作为返回值返回（Safari、Chrome）可以在页面卸载前为用户显示对话框提示用户是否确认卸载。</p><p>DOMContentLoaded事件，在形成完整的DOM树之后就会触发，不用等待图片之类的外部资源下载。不支持本事件的浏览器，可以设置一个延迟为0的超时调用：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>超时调用为0的意思为：在当前JavaScript处理完成后立即运行这个函数。必须将其作为页面中的第一个超时调用。</p><p>readystatechange事件，提供与文档或元素的加载状态有关信息，支持本事件的对象（不是事件对象）都有一个readyState属性，表示元素的加载状态，可能包含下列5个值：<br> 1.uninitialized：对象存在但未初始化；<br> 2.loading：对象正在加载数据；<br> 3.loaded：对象加载数据完成；<br> 4.interactive：可以操作对象了，但还没完全加载；<br> 5.complete：对象加载完毕；<br> 并非所有对象都有全部的5个阶段，而且5个阶段的顺序不一定，检测操作时，需要同时检测interactive和complete两个阶段。检测完成时需要同时检测loaded和complete两个阶段。并在执行一次操作后就将事件处理程序移除，以防多次执行。</p><p>pageshow事件，当页面是通过前进后退等按钮从内存中直接加载，会跳过load事件（初次打开页面时已经执行过load事件），就会触发pageshow事件，事件目标是document，但事件处理程序必须添加到window对象，初次加载时，pageshow事件在load事件之后触发。事件对象的persisted属性保存着一个布尔值属性，如果页面被保存在了内存当中，则为true，否则为false。<br> pagehide事件，该事件会在浏览器卸载页面时触发，并且在unload事件之前触发，事件目标是document，但事件处理程序必须添加到window对象，事件对象也包含persisted属性。<br> 当第一次触发pageshow时（首次加载页面），persisted属性的值一定是false，而在第一次触发pagehide事件时（首次卸载页面），persisted的值会变成true。</p><p>hashchange事件，URL的参数列表（#号后面的所有字符串）发生变化时触发，必须把事件处理程序绑定在window对象上，事件对象包含oldURL和newURL两个属性，分别保存变化前后的完整URL。最好还是使用location对象来确定当前的参数列表。</p><h3 id="设备事件" tabindex="-1"><a class="header-anchor" href="#设备事件" aria-hidden="true">#</a> 设备事件</h3><p>orientationchange事件，在横屏和竖屏之间切换会触发此事件，window.orientation属性保存状态信息，0为竖屏正放，90为主屏按钮在右横放，-90为主屏按钮在左横放。</p><p>deviceorientation事件，设备方向发生改变时触发此事件，触发时，事件对象包含着每个轴相对于设备静止状态下发生的变化信息。<br> alpha属性，围绕Z轴旋转时，Y轴变化的度数差<br> beta属性，围绕X轴旋转时，Z轴变化的度数差<br> gamma属性，围绕Y轴旋转时，Z轴的变化度数差</p><p>devicemotion事件，设备发生移动的时候触发，事件对象包含下列属性：<br> acceleration属性，一个包含x,y,z属性的对象，在不考虑重力的情况下在每个方向上的加速度。<br> accelerationIncludingGravity属性，一个包含x,y,z属性的对象，在考虑重力的情况下在每个方向上的加速度。<br> interval属性，以毫秒表示的时间值。<br> rotationRate属性，包含alpha，beta，gamma三个方向属性的对象</p><h3 id="触摸与手势事件" tabindex="-1"><a class="header-anchor" href="#触摸与手势事件" aria-hidden="true">#</a> 触摸与手势事件</h3><p>touchstart事件，手指触摸屏幕时触发，即使已经有一个手指放在屏幕上也会触发。<br> touchmove事件，当手指在屏幕上滑动时连续触发，事件发生时，调用preventDefault()可以阻止滚动。<br> touchend事件，当手指从屏幕上移开时触发。</p><p>每个触摸事件的事件对象都包含了鼠标事件中的常见属性，触摸事件对象还包含下列3个用于跟踪触摸的属性：<br> touches属性，表示当前跟踪的触摸操作的Touch对象的数组。<br> targetTouches属性，特定于事件目标的Touch对象的数组。<br> changeTouches属性，表示自上次触摸以来发生了什么改变的Touch对象的数组。<br> 在touchend事件发生时，touches集合中就没有任何Touch对象了，因为不存在活动的触摸操作，此时必须转而使用changeTouches集合。</p><p>触摸屏幕上的元素时，事件触发顺序如下：touchstart，mouseover，mousemove，mousedown，mouseup，click，touchend。</p><p>手势事件，当两个手指触摸屏幕时就会产生手势，触发手势事件。有3个手势事件：<br> gesturestart事件，当一个手指已经按在屏幕上，另一个手指又触摸屏幕时触发。<br> gesturechange事件，当触摸屏幕的任何一个手指的位置发生变化时触发。<br> gestureend事件，当任何一个手指从屏幕上面移开时触发。</p><p>只有当两只手指都触摸到事件的接收容器上时才会触发手势事件，放上第一只手指时，会触发touchstart事件，放上第二只手指时，会先触发gesturestart事件，再触发第二只手指的touchstart事件，有一个或两个手指在屏幕上滑动时，将会触发gesturechange事件，只要有一个手指移开，就会触发gestureend事件，紧接着又会触发该手指的touchend事件。</p><p>与触摸事件一样，手势事件的事件对象也包含所有常见的属性，还包含额外的两个属性rotation和scale属性。<br> rotation属性表示手指变化引起的旋转角度，负值表示逆时针旋转，正值表示顺时针旋转（从0开始），scale属性表示两个手指间距离的变化情况，距离拉大增长，距离缩短减小（从1开始）。</p><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/note/js-develop/12.html" class="nav-link" aria-label="第十二章、DOM2和DOM3"><!--[--><!--]--> 第十二章、DOM2和DOM3 <!--[--><!--]--></a></span><span class="next"><a href="/note/js-develop/14.html" class="nav-link" aria-label="第十四章、表单脚本"><!--[--><!--]--> 第十四章、表单脚本 <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main></div><!----><!--]--></div>
    <script src="/note/assets/js/runtime~app.afee06d1.js" defer></script><script src="/note/assets/js/4640.740cb415.js" defer></script><script src="/note/assets/js/app.266da3ea.js" defer></script>
  </body>
</html>
